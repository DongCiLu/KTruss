\section{Introduction}
\label{introduction}

\begin{figure}[ht]
    \centering
    \includegraphics[width=\linewidth]{./figures/illustration_main.png}
    \caption{Two layer index structure for k-truss community queries.}
    \label{fig:illustration_main}
		\vspace{-0.2 in}
\end{figure}

Community structures naturally exist in many real-world networks such as social, biological, collaboration, and communication networks. The task of community detection is to identify all communities in a network, which is a fundamental and well-studied problem in the literature. Recently, several papers have studied a
related but different problem called community search, which is to find the community containing a given set of query nodes. The need for community search naturally arises in many real application scenarios, where one is motivated by the discovery of the communities in which given query nodes participate. Since the communities defined by different nodes in a network may be quite different, community search with query nodes opens up the prospects of user-centered and personalized search, with the potential of the answers being more meaningful to a user~\cite{huang2014querying}. As just one example, in a social network, the community formed by a person's high school classmates can be significantly different from the community formed by her family members which in turn can be quite different from the one formed by her colleagues~\cite{mcauley2012learning}.

Various community models have been proposed based on different dense subgraph structures such as k-core~\cite{sozio2010community,cui2014local,li2015influential}, k-truss~\cite{huang2014querying}, quasi-clique~\cite{cui2013online}, weighted densest subgraph~\cite{wu2015robust}, to name a few major examples. Of these, the k-truss as a definition of cohesive subgraph of a graph G, requires that each edge be contained in at least (k - 2) triangles within this subgraph. It is well known that most of real-world social networks are triangle-based, which always have high local clustering coefficient. Triangles are known as the fundamental building blocks of networks~\cite{wang2012truss}. In a social network, a triangle indicates two friends have a common friend, which shows a strong and stable relationship among three friends. Intuitively, the more common friends two people have, the stronger their relationship. In a k-truss, each pair of friends is "`endorsed"' by at least (k - 2) common friends. Thus, a k-truss with a large value of k signifies strong inner-connections between members of the subgraph. Huang et al.~\cite{huang2014querying} proposed a community model based on the notion of k-truss as follows. Given one query node q and a parameter k, a k-truss community containing q is a maximal k-truss containing q, in which each edge is "`triangle connected"' with other edges. Triangle connectivity is strictly stronger than connectivity. 

The proposed TCP-index~\cite{huang2014querying} works well to find overlapping communities containing a single query vertex q. However, it is not obvious how to support more complex queries involving multiple query vertices with the index. For example, queries such as "Does a query set of $n$ vertices ${q_1, ..., q_n}$ belong to the same k-truss community?" require $n$ individual k-truss community search and then find intersections among the resulting communities. Although the query process for TCP-index is theoretically optimal for a single vertex, which has a time complexity of $O(n'm')$ where $n'$ and $m'$ is the size of the result truss community, it faces scalability issues in large-scale real-world graphs where communities can grow to millions of edges.

In this paper, we aim to develop a novel 2-level index structure to efficiently answer complex multiple-vertex queries that can easily be used as building blocks for many applications. The query process takes a different, more natural approach that it first identify the resulting communities with the top-level index that do not require community search on any query vertices. Then, if the query require the exact community rather than community relations among query vertices, the query process discovers the exact communities by a single run of breath first search on the bottom-level index, which is proved to be theoretically optimal and it is efficient in practice. With this approach, the index can easily answer various kinds of queries such as "What is the k-truss community with highest k that a set of query vertices belong to" (Max-k truss query) and "Show all the k-truss communities that a set of query vertices belong to" (Any-k truss query) as well as multiple-vertex k-truss query. 

Finding out the identity of the queried k-truss community and then doing the exact community search is also more time and space efficient. As a query vertex can belong to multiple k-truss communities, our top-level index is build on edges of the graph as each edge can only belong to one k-truss community with a same k. The query algorithm for k-truss community identity search can run in $\sum_{u \in Q} d_u$ with the top-level index, where $d_u$ is the degree of a query vertex $u$. To retrieve the exact community, our query algorithm can find it in linear time complexity to the community size with the bottom-level index, which is the optimal time complexity.

We construct our index structure in a bottom-up manner. The bottom-level index can be efficiently constructed from the underlying graph by representing edges with vertices and representing triangle connectivity with edge connectivity in the transformed graph, and find the minimum spanning tree of the transformed graph to form the bottom-level index. Although the transformed graph may have number of edges equal to three times the number of triangles in the graph, our index construction algorithm is efficient in the sense that it can generate the minimum spanning tree during the tranform without store the transformed graph, so the time and space complexity is only $O(m\log{m})$ and $O(m)$ respectively where $m$ is the number of edges in original graph. After the bottom-level index has been constructed, the top-level index can easily being constructed on top of it with a single run of breath first search, where both the space and time complexity is $O(m)$.

Our contribution can be summarized as follows,

\begin{itemize}
	\item We introduce the k-truss community identity search, which is supported by various query types. The k-truss community identity search is efficient for many real-world applications and is much more efficient than k-truss community search based approach.
	\item We develop a 2-level index structure that can handle various kinds of multiple-vertex k truss community search efficiently by first perform the k-truss community identity search on the top-level tree structured index and then, if necessary, search the exact k-truss community with the bottom-level index with a single run of breadth first search. 
	\item We design an efficient bottom-up index construction algorithm for our 2-level index structure. The time and space complexity is $O(m\log{m})$ and $O(m)$ respectively.
	\item We evaluate our index on large-scale real-world graphs and compare it with state-of-the-art algorithm. The results show that our index is not only much compact and efficient for k-truss community search queries but can also support various query types.
\end{itemize}

%As the time complexity of the state-of-art approximation algorithm can calculate the connected truss community containing all query vertices with the largest $k$ with a time complexity of $O(n'm')$ where $n'$ and $m'$ are the size of the result truss community. Although the linear time complexity for retrieve the whole community is optimal, these algorithms have limited scalability in large scale graphs, where communities grow to millions of edges. In many applications, such as query if a set of users are involved in same community and how cohesive is the community, only the infomation, such as the identity, the $k$ and the size, of the community are required rather than the detailed community itself. For these quries, We construct an index structure that can retrieve information of all connected k-truss communities that contain $Q$ with all possible K values. The algorithm can run in $\sum_{u \in Q} d_u$, where $d_u$ is the degree of vertex $u$. We prove that this is the optimal time complexity for truss community query. Note that if further details of found truss communities are required, our index structure can also retrieve the exact community with linear time complexity to the community size which is also the optimal time complexity. \autoref{fig:illustration_main} shows an example of our two level index structures: the \inducedgraph{} and the \treeindex{}.

The rest of this paper is organized as follows. In Section~\ref{relatedwork} we show previous works on community search and detection. Section~\ref{preliminary} provides notations and definitions used in this paper. We explain the two layered index structure for truss community search in Section~\ref{index}. Section~\ref{dynamic} discusses index update algorithm for dynamic graphs. The evaluations of our algorithm are in Section~\ref{evaluation}. We conclude our work in Section~\ref{conclusion}.


\note{add more application}
~\cite{durmaz2017frequent,zong2015behavior,yin2017taming}


